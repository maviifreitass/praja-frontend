<div class="auth-container">
  <div class="auth-card">
    <!-- Logo e título -->
    <div class="auth-header">
      <div class="logo">
        <svg width="48" height="48" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="32" height="32" rx="8" fill="#3b82f6"/>
          <path d="M8 12h16v8H8z" fill="#fff"/>
        </svg>
        <h1 class="brand-name">PraJá</h1>
      </div>
      <p class="auth-subtitle">Crie sua conta</p>
    </div>

    <!-- Mensagens de erro e sucesso -->
    <div class="alert alert-error" *ngIf="errorMessage">
      <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
      </svg>
      {{ errorMessage }}
    </div>

    <div class="alert alert-success" *ngIf="successMessage">
      <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
        <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.061L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
      </svg>
      {{ successMessage }}
    </div>

    <!-- Formulário -->
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="auth-form">
      <!-- Nome -->
      <div class="form-group">
        <label for="name" class="form-label">Nome completo</label>
        <input
          id="name"
          type="text"
          formControlName="name"
          class="form-input"
          [class.error]="isFieldInvalid('name')"
          placeholder="Seu nome completo"
          autocomplete="name"
          (input)="clearMessages()"
        >
        <div class="error-message" *ngIf="isFieldInvalid('name')">
          {{ getFieldError('name') }}
        </div>
      </div>

      <!-- Email -->
      <div class="form-group">
        <label for="email" class="form-label">Email</label>
        <input
          id="email"
          type="email"
          formControlName="email"
          class="form-input"
          [class.error]="isFieldInvalid('email')"
          placeholder="seu@email.com"
          autocomplete="email"
          (input)="clearMessages()"
        >
        <div class="error-message" *ngIf="isFieldInvalid('email')">
          {{ getFieldError('email') }}
        </div>
      </div>

      <!-- Senha -->
      <div class="form-group">
        <label for="password" class="form-label">Senha</label>
        <div class="password-input-container">
          <input
            id="password"
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            class="form-input password-input"
            [class.error]="isFieldInvalid('password')"
            placeholder="••••••••"
            autocomplete="new-password"
          >
          <button
            type="button"
            class="password-toggle"
            (click)="togglePasswordVisibility('password')"
            [attr.aria-label]="showPassword ? 'Ocultar senha' : 'Mostrar senha'"
          >
            <svg *ngIf="!showPassword" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
              <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
              <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
            </svg>
            <svg *ngIf="showPassword" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
              <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
              <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
              <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.708zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
            </svg>
          </button>
        </div>
        
        <!-- Indicador de força da senha -->
        <div class="password-strength" *ngIf="registerForm.get('password')?.value">
          <div class="strength-bar">
            <div 
              class="strength-fill" 
              [style.width.%]="getPasswordStrength().strength"
              [style.background-color]="getPasswordStrength().color"
            ></div>
          </div>
          <span class="strength-label" [style.color]="getPasswordStrength().color">
            {{ getPasswordStrength().label }}
          </span>
        </div>
        
        <div class="error-message" *ngIf="isFieldInvalid('password')">
          {{ getFieldError('password') }}
        </div>
      </div>

      <!-- Confirmar Senha -->
      <div class="form-group">
        <label for="confirmPassword" class="form-label">Confirmar senha</label>
        <div class="password-input-container">
          <input
            id="confirmPassword"
            [type]="showConfirmPassword ? 'text' : 'password'"
            formControlName="confirmPassword"
            class="form-input password-input"
            [class.error]="isFieldInvalid('confirmPassword')"
            placeholder="••••••••"
            autocomplete="new-password"
          >
          <button
            type="button"
            class="password-toggle"
            (click)="togglePasswordVisibility('confirmPassword')"
            [attr.aria-label]="showConfirmPassword ? 'Ocultar senha' : 'Mostrar senha'"
          >
            <svg *ngIf="!showConfirmPassword" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
              <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
              <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
            </svg>
            <svg *ngIf="showConfirmPassword" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
              <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>
              <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>
              <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.708zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>
            </svg>
          </button>
        </div>
        <div class="error-message" *ngIf="isFieldInvalid('confirmPassword')">
          {{ getFieldError('confirmPassword') }}
        </div>
      </div>

      <!-- Termos de uso -->
      <div class="form-group">
        <label class="checkbox-label">
          <input
            type="checkbox"
            formControlName="acceptTerms"
            class="checkbox-input"
            [class.error]="isFieldInvalid('acceptTerms')"
          >
          <span class="checkbox-text">
            Eu aceito os 
            <a href="#" class="terms-link">Termos de Uso</a> 
            e a 
            <a href="#" class="terms-link">Política de Privacidade</a>
          </span>
        </label>
        <div class="error-message" *ngIf="isFieldInvalid('acceptTerms')">
          {{ getFieldError('acceptTerms') }}
        </div>
      </div>

      <!-- Botão de registro -->
      <button
        type="submit"
        class="btn-primary"
        [disabled]="isLoading"
      >
        <svg 
          *ngIf="isLoading" 
          class="loading-spinner" 
          width="20" 
          height="20" 
          viewBox="0 0 24 24"
        >
          <circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2" opacity="0.3"/>
          <path fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"/>
        </svg>
        <span *ngIf="!isLoading">Criar Conta</span>
        <span *ngIf="isLoading">Criando conta...</span>
      </button>
    </form>

    <!-- Link para login -->
    <div class="auth-footer">
      <p>
        Já tem uma conta? 
        <a routerLink="/auth/login" class="auth-link">Faça login</a>
      </p>
    </div>
  </div>

  <!-- Informações adicionais -->
  <div class="auth-info">
    <h2>Junte-se ao PraJá</h2>
    <p>Comece a gerenciar seus tickets de forma profissional e eficiente.</p>
    <ul>
      <li>Configuração rápida</li>
      <li>Interface intuitiva</li>
      <li>Suporte completo</li>
      <li>Segurança garantida</li>
    </ul>
  </div>
</div>
